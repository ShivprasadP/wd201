<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://kit.fontawesome.com/2c42c75f1d.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <style>
      body {
    --bs-body-font-family: var(--bs-font-monospace);
    --bs-body-line-height: 1.4;
    --bs-body-bg: var(--bs-gray-100);
}

span{
    font-size: 10px;
}

.table{
    border: 3px;
}

label{
    float: left;
    margin-left: 38%;
}

input{
    float: right;
    margin-right: 34%;
}

button{
    margin-top: 3%;
    border-radius: 9px;
    background-image: linear-gradient(rgb(97, 92, 253), rgb(143, 47, 217));
}

button:hover{
    background-image: linear-gradient(rgb(143, 47, 217),rgb(97, 92, 253));
}

span{
    float: right;
    margin-top: 3px;
    color: rgb(226, 0, 0);
}
    </style>
    <title>Registration Form</title>
  </head>
  <body>
    <div>
      <form id="registration-form">
        <center>
          <br><br>
          <h2>Registration Form</h2>
          <span class="error"></span><br><br>
        <label for="name">Name:</label>
        <input type="text" id="name" required><br>
        <span id="name-error"></span>
        <br>
        <label for="email">Email:</label>
        <input type="email" id="email" required>
        <span id="email-error"></span>
        <br><br>
        <label for="password">Password:</label>
        <input type="password" id="password" required>
        <span id="password-error"></span>
        <br><br>
        <label for="dob">Date of Birth:</label>
        <input type="date" id="dob" required>
        <span id="birthday-error"></span>
        <br><br>
        <input type="checkbox" id="terms" required>
        <label for="terms">I accept the terms and conditions:</label>
        <span id="terms-error"></span>
        <br><br>
        <button type="submit" id="takeNote">Register</button></center>
      </form>
      <br><br>
      <table class="table table-dark table-striped" id="registration-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Password</th>
            <th>Dob</th>
            <th>Accepted Terms</th>
          </tr>
        </thead>
        <tbody id="registration-table-body">
        </tbody>
      </table>
      
    <br /><br />

    <script>
      const registrationForm = document.getElementById('registration-form');
const registrationTableBody = document.getElementById('registration-table-body');

registrationForm.addEventListener('submit', function(event) {
  event.preventDefault();

  const nameInput = document.getElementById('name');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const dobInput = document.getElementById('dob');
  const termsInput = document.getElementById('terms');

  const name = nameInput.value;
  const email = emailInput.value;
  const password = passwordInput.value;
  const dob = dobInput.value;
  const terms = termsInput.checked;

  const validEmail = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/g;

  const validname = /\d+$/g;

  if (!name || !email || !password || !dob || !terms) {
    document.getElementById('error').innerHTML='<i class="fa-solid fa-circle-exclamation"></i>Please fill out all required fields.';
    return;
  }
  
  if(name=="" || validname.test(name))
  {
    document.getElementById("name-error").innerHTML='<i class="fa-solid fa-circle-exclamation"></i>Please enter valid name.';
    return;
  }

  if(email=="" || !validEmail.test(email))
  {
    document.getElementById("email-error").innerHTML='<i class="fa-solid fa-circle-exclamation"></i>Please enter valid email address.';
    return;
  }

  if (password.length < 8) {
    document.getElementById('password-error').innerHTML='<i class="fa-solid fa-circle-exclamation"></i>Password must be at least 8 characters long.';
    return;
  }

  const today = new Date();
  const dobDate = new Date(dob);
  const ageInMilliseconds = today - dobDate;
  const ageInYears = ageInMilliseconds / 1000 / 60 / 60 / 24 / 365.25;

  if (ageInYears < 18 ) {
    document.getElementById('birthday-error').innerHTML='<i class="fa-solid fa-circle-exclamation"></i>You must be at least 18 years old to register.';
    return;
  }else if(ageInYears > 55)
  {
    document.getElementById('birthday-error').innerHTML='<i class="fa-solid fa-circle-exclamation"></i>You must be under 55 years old to register.';
    return;
  }

  function store(){

    const data = {
      name: name,
        email: email,
        password: password,
        dob: dob,
        terms: terms,
    };

    window.localStorage.setItem("User-Data",JSON.stringify(data));  
}
store();

function retrieveRecords(){ 
  const row = document.createElement('tr');

    const nameCell = document.createElement('td');
    nameCell.textContent = name;
    row.appendChild(nameCell);

    const emailCell = document.createElement('td');
    emailCell.textContent = email;
    row.appendChild(emailCell);

    const passwordCell = document.createElement('td');
    passwordCell.textContent = password;
    row.appendChild(passwordCell);

    const dobCell = document.createElement('td');
    dobCell.textContent = dob;
    row.appendChild(dobCell);

    const termsCell = document.createElement('td');
    termsCell.textContent = terms;
    row.appendChild(termsCell);

    registrationTableBody.appendChild(row);

}
retrieveRecords();
    alert('Registration successful!');

    document.getElementById("name-error").textContent = "";
    document.getElementById("email-error").textContent = "";
    document.getElementById("password-error").textContent = "";
    document.getElementById("birthday-error").textContent = "";
    
});

    </script>
  </body>
</html>
